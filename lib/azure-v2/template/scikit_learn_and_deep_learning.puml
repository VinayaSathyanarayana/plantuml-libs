@startuml
' https://docs.microsoft.com/en-us/azure/architecture/reference-architectures/ai/training-python-models

!global $INCLUSION_MODE='local'
!global $LIB_BASE_LOCATION='{{= it.relativeRepoLibDir }}'
!include $LIB_BASE_LOCATION/bootstrap.puml

include('azure-v2/style')
include('azure-v2/Item/Compute/ServiceVirtualMachine')
include('azure-v2/Item/AiMachineLearning/ServiceCognitiveServices')
include('azure-v2/Item/Compute/ServiceVmScaleSets')
include('azure-v2/Item/Containers/ServiceContainerRegistries')
include('azure-v2/Item/General/ServiceBlobBlock')

ServiceVirtualMachine('dsvm', 'Microsoft Data Science Virtual Machine (DSVM)')
ServiceCognitiveServices('mls', 'Azure Machine Learning service')
ServiceVmScaleSets('mlc', 'Azure Machine Learning compute')
ServiceContainerRegistries('cr', 'Azure Container Registry')
ServiceBlobBlock('sb', 'Azure Storage Blobs')

dsvm -> mls : Relationship("Training and test data and script")
dsvm <- mls : Relationship("Training results")
mls --> cr : Relationship("Docker container")
mls <-up-> sb
mls -> mlc : Relationship("Script execution commands")
mls <- mlc : Relationship("Status")
mlc <-up-> sb
cr -up-> mlc
@enduml
